<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Leave Management</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- Navigation -->
<nav class="navbar">
    <div class="nav-container">
        <div class="nav-brand">
            <h2>üè¢ Leave Management</h2>
        </div>
        <div class="nav-user">
            <span id="user-name">Welcome, Admin</span>
            <button onclick="logout()" class="btn btn-secondary btn-sm">Logout</button>
        </div>
    </div>
</nav>

<div class="container">
    <!-- Summary Cards -->
    <div class="summary-cards">
        <div class="summary-card pending">
            <h3>Pending Requests</h3>
            <p class="summary-value" id="pending-count">0</p>
        </div>
        <div class="summary-card approved">
            <h3>Approved</h3>
            <p class="summary-value" id="approved-count">0</p>
        </div>
        <div class="summary-card rejected">
            <h3>Rejected</h3>
            <p class="summary-value" id="rejected-count">0</p>
        </div>
        <div class="summary-card" id="pending-managers-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); display: none;">
            <h3>Pending Managers</h3>
            <p class="summary-value" id="pending-managers-count">0</p>
        </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab-btn active" onclick="showAdminTab('pending')">Pending Approvals</button>
        <button class="tab-btn" onclick="showAdminTab('all')">All Leaves</button>
        <button class="tab-btn" id="managers-tab-btn" onclick="showAdminTab('managers')" style="display: none;">Manager Approvals</button>
        <button class="tab-btn" onclick="showAdminTab('holidays')">Manage Holidays</button>
    </div>

    <!-- Pending Approvals Tab -->
    <div id="pending-tab" class="tab-content active">
        <div class="card">
            <h2>Pending Leave Requests</h2>

            <div class="filters">
                <select id="pending-sort" onchange="loadPendingLeaves()">
                    <option value="createdAt">Sort by Applied Date</option>
                    <option value="startDate">Sort by Start Date</option>
                    <option value="workingDays">Sort by Duration</option>
                </select>

                <button onclick="loadPendingLeaves()" class="btn btn-secondary">üîÑ Refresh</button>
            </div>

            <div id="pending-leaves-container">
                <p class="loading">Loading pending requests...</p>
            </div>

            <div class="pagination">
                <button id="pending-prev" onclick="previousPendingPage()" class="btn btn-secondary">Previous</button>
                <span id="pending-page-info">Page 1</span>
                <button id="pending-next" onclick="nextPendingPage()" class="btn btn-secondary">Next</button>
            </div>
        </div>
    </div>

    <!-- All Leaves Tab -->
    <div id="all-tab" class="tab-content">
        <div class="card">
            <h2>All Leave Requests</h2>

            <div class="filters">
                <select id="all-status-filter" onchange="loadAllLeaves()">
                    <option value="">All Status</option>
                    <option value="PENDING">Pending</option>
                    <option value="APPROVED">Approved</option>
                    <option value="REJECTED">Rejected</option>
                    <option value="CANCELLED">Cancelled</option>
                </select>

                <select id="all-sort" onchange="loadAllLeaves()">
                    <option value="createdAt">Sort by Applied Date</option>
                    <option value="startDate">Sort by Start Date</option>
                    <option value="workingDays">Sort by Duration</option>
                </select>

                <button onclick="loadAllLeaves()" class="btn btn-secondary">üîÑ Refresh</button>
            </div>

            <div id="all-leaves-container">
                <p class="loading">Loading all requests...</p>
            </div>

            <div class="pagination">
                <button id="all-prev" onclick="previousAllPage()" class="btn btn-secondary">Previous</button>
                <span id="all-page-info">Page 1</span>
                <button id="all-next" onclick="nextAllPage()" class="btn btn-secondary">Next</button>
            </div>
        </div>
    </div>

    <!-- Manager Approvals Tab -->
    <div id="managers-tab" class="tab-content">
        <div class="card">
            <h2>Manager Approval Requests</h2>
            <p class="info-text">Managers need your approval before they can approve/reject employee leave requests.</p>

            <div class="filters">
                <select id="manager-filter" onchange="loadManagerApprovals()">
                    <option value="pending">Pending Approvals</option>
                    <option value="all">All Managers</option>
                </select>

                <button onclick="loadManagerApprovals()" class="btn btn-secondary">üîÑ Refresh</button>
            </div>

            <div id="managers-container">
                <p class="loading">Loading manager approvals...</p>
            </div>

            <div class="pagination">
                <button id="managers-prev" onclick="previousManagerPage()" class="btn btn-secondary">Previous</button>
                <span id="managers-page-info">Page 1</span>
                <button id="managers-next" onclick="nextManagerPage()" class="btn btn-secondary">Next</button>
            </div>
        </div>
    </div>

    <!-- Manage Holidays Tab -->
    <div id="holidays-tab" class="tab-content">
        <div class="card">
            <h2>Add Festival Holiday</h2>
            <form id="holiday-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="holiday-name">Holiday Name *</label>
                        <input type="text" id="holiday-name" required placeholder="e.g., Diwali">
                    </div>

                    <div class="form-group">
                        <label for="holiday-date">Date *</label>
                        <input type="date" id="holiday-date" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="holiday-year">Year *</label>
                    <input type="number" id="holiday-year" required value="2026" min="2026" max="2030">
                </div>

                <button type="submit" class="btn btn-primary">Add Holiday</button>
            </form>

            <div id="holiday-message" class="message"></div>
        </div>

        <div class="card">
            <h2>Festival Holidays</h2>

            <div class="filters">
                <select id="admin-holiday-year" onchange="loadAdminHolidays()">
                    <option value="2026">2026</option>
                    <option value="2027">2027</option>
                </select>
                <button onclick="loadAdminHolidays()" class="btn btn-secondary">üîÑ Refresh</button>
            </div>

            <div id="admin-holidays-container">
                <p class="loading">Loading holidays...</p>
            </div>
        </div>
    </div>
</div>

<script src="common.js"></script>
<script src="admin.js"></script>
</body>
</html>